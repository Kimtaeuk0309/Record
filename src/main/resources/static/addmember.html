<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>멤버 등록</title>
</head>
<body>
<h1>멤버 등록</h1>

<form id="addMemberForm">
    <label for="uid">UID:</label>
    <input type="number" id="uid" name="uid" required>
    <br><br>

    <label for="nickname">닉네임:</label>
    <input type="text" id="nickname" name="nickname" required>
    <br><br>

    <button type="submit">등록</button>
</form>

<p id="result"></p>

<script src="js/common.js"></script>

<script>

    document.getElementById("addMemberForm").addEventListener("submit", async function(event) {
      event.preventDefault();

      const uid = document.getElementById("uid").value;
      const nickname = document.getElementById("nickname").value;

      const response = await authFetch("/api/members/addmember", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ uid: uid, nickname: nickname })
      });

      const resultBox = document.getElementById("result");

      if (response.status === 201) {

        const result = await response.json();
        resultBox.style.color = "green";
        resultBox.textContent =
          `등록 성공 ✅ UID=${result.uid}, 닉네임=${result.nickname}`;
      } else {

        const errorMsg = await response.text();
        resultBox.style.color = "red";
        resultBox.textContent = `등록 실패 ❌ : ${errorMsg}`;
      }
    });
</script>

</body>
</html>
